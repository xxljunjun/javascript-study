<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      /*
            给定一个段落 (paragraph) 和一个禁用单词列表 (banned)。返回出现次数最多，同时不在禁用列表中的单词。

            题目保证至少有一个词不在禁用列表中，而且答案唯一。

            禁用列表中的单词用小写字母表示，不含标点符号。段落中的单词不区分大小写。答案都是小写字母。

             

            示例：

            输入: 
            paragraph = "Bob hit a ball, the hit BALL flew far after it was hit."
            banned = ["hit"]
            输出: "ball"
            解释: 
            "hit" 出现了3次，但它是一个禁用的单词。
            "ball" 出现了2次 (同时没有其他单词出现2次)，所以它是段落里出现次数最多的，且不在禁用列表中的单词。 
            注意，所有这些单词在段落里不区分大小写，标点符号需要忽略（即使是紧挨着单词也忽略， 比如 "ball,"）， 
            "hit"不是最终的答案，虽然它出现次数更多，但它在禁用单词列表中。


                */
      /**
       * @param {string} paragraph
       * @param {string[]} banned
       * @return {string}
       */
      var mostCommonWord = function (paragraph, banned) {
        //思路：先把禁用的单词去掉，再遍历找出最多的那个单词
        let reg = /[a-zA-Z]/
        let arr = []
        let idxStr = ''
        for(let i = 0;i<paragraph.length;i++){
            if(reg.test(paragraph[i])){
                idxStr+=paragraph[i]
                if(i == paragraph.length-1){
                    arr.push(idxStr)
                }
            }else{
                arr.push(idxStr)
                idxStr = ''
            }
        }
        arr = arr.map(val=>{
            return val.toLowerCase()
        })
        arr = arr.filter(val=>{
            return val != ''
        })
        arr = arr.filter(val=>{
            return  banned.indexOf(val) == -1
        })
        
        console.log('arr',arr)
        
       
   
        let myMap = new Map();
        arr.forEach((val) => {
          if (myMap.has(val)) {
            myMap.set(val, myMap.get(val) + 1);
          } else {
            myMap.set(val, 1);
          }
        });
        console.log('myMap',myMap)
        let num = 1;
        let str = "";
        myMap.forEach((val, idx) => {
          if (val >= num) {
            str = idx;
            num = val;
          }
        });
        return str;
      };
      console.log(mostCommonWord("K; P; u, M' o. W! S; y? y, k, T' t; M, E, N? Q! J, w' x. s; S. Y. R; V, P? U; P? o; g? W, N; N' S, W, h, Z' T? t! l' T? x! K; o. F? q. w? Q, s? Q! m; g? x? R; L' q, C; f! E? x? T; f, r! O. K! P, x. z; l' j. Y, S! w? w, j. U; s, M? r' J? Z. x; T. z; Q; Q? J' w' W, p! V, P; t! x? o; G' z' u, V, C' S; O? I; g, r. C? y. t! O, t' n. y. Q. N? L. t; I, X' W; w! M; m? Y? f? Z. s? x? U. q! I, i, v! p, V! Z; z; F! D. R, r' y. r' v. j! Y, M! U. M, p; Y, u' P, t, R. w? S! W. X. U? R? X' s, e. w' V; I' Y; z? l! s, u! z! R' a; R' y' S' Q? l, j, L; W. V! w; V, y? R! h. V. L, Y. X, Y' Q? U; y, n! V, y? N; V; x' H' U? K; O! X! d. U, W' U' x. Y; L' X, T? t, V, L; r! k! u' N. y; P. S, e! j, X! t' Z; s? y! u; n' K, T, Z. w. l! Y; g' x, H; U' D! Y? e, b, W. X! u; W; v, S. Z, y? o? K, P? Q? Z, Y' P; n. V? h; J, v! v; X; V. s. y. g' m? l, X. K! u? O? j; u, n' T. O' S; W. U; m. G! Z! Z, K, v. q. Z? q; Z; o? P? I. X, z! t! w' v. z! N' o! M' Z' Z? V. S; Q. O; Z! k. X! r! w. T! q. M? n, I, M; R, d, h; Z, z' n,", ["n","q","l","i","u","d","h","o","y","b","c","t","v","a","x","m","k","w","s","z"]));
    </script>
  </body>
</html>
